# Load Balancing Rules Overview

<br>

### Sabse Pehle ‚Äì Algorithm Ki Zaroorat Hi Kyun?

Load Balancer ka main kaam:
- üëâ Incoming traffic ko backend servers ke beech distribute karna.

Lekin question:
- ‚ùì Kaise distribute kare?
  - Random?
  - Order mein?
  - Fastest server ko?
  - Least busy ko?
 
Isi decision logic ko bolte hain: **Load Balancing Algorithm**.

Matlab Load Balancing Algorithm se hi Load Balancer decide karta hai ki incoming request ko konse backend server pe bhejna hai. 

<br>
<br>

### Load Balancing Algorithms Kitne Type ki Hoti Hain

Load Balancing Algorithms two types ki hoti hain:
- Static Load Balancing Algorithm.
  - Round-Robin Algorithm.
  - Weighted Round-Robin.
  - IP Hash.
- Dynamic Load Balancing Algorithms.
  - Least-Connection Method.
  - Least-Response Time.
  - Weighted Least Connection.
 
<br>
<br>

### Static Load Balancing Algorithms

Static Load Balancing algorithms wo algorithms hote hain jahan traffic distribute karne ka decision pehle se set kiye gaye fixed rules par based hota hai.

Iska matlab hai ki ye algorithms predefined rules ke according backend se vm select karte hain traffic ko distribute karne ke liye.

Ye algorithms "Real-time" data ko nahi dekhte. Matlab, Load Balancer ye check nahi karta ki server kitna busy hai, uski CPU utilization kitni hai, ya wo kitna slow respond kar raha hai. Load Balancer bas apne pehle se bane hue rules ko follow karke backend se vm select karta hai aur traffic us vm par bhejta hai.

In algorithms ke types hain:
- Round-Robin Algorithm.
- Weighted Round-Robin.
- IP Hash.

<br>
<br>

### Round Robin Algorithm

Ye sabse basic aur simple algorithm hai.

Round Robin ka basic idea hai ki incoming requests ko sequential order mein servers ke beech distribute karna ‚Äî ek ek karke, cyclic manner mein.

Iska matlab hai ki round-robin algorithm incoming requests ko ek ke baad ek server pe distribute karti hai cyclic manner mein.

**Example**:

Imagine karo tumhare paas multiple backend servers hain:
- Server A.
- Server B.
- Server C.

Load Balancer kya karega ki:
- 1st request ‚Üí A.
- 2nd request ‚Üí B.
- 3rd request ‚Üí C.
- 4th request ‚Üí A (cycle repeat).
- 5th request ‚Üí B.
- 6th request ‚Üí C.

Aur ye loop chalta rahega.

Ismein koi intelligence nahi hoti jaise:
- ‚ùå Server load check karna.
- ‚ùå CPU utilization dekhna.
- ‚ùå Fast/slow server detect karna.

<br>

**Algorithm Internally Kaise Kaam Karta Hai?**:

Conceptually ek pointer / index counter maintain hota hai.

Example:

Total backends = 3

Index values:
- 0 ‚Üí Server A.
- 1 ‚Üí Server B.
- 2 ‚Üí Server C.

Har request pe:
```
selected_server = backends[current_index]
current_index = (current_index + 1) % total_backends
```

Yahan % (modulo) ensure karta hai ki index rotate kare.

Execution:

| Request | Current Index | Server |
| ------- | ------------- | ------ |
| Req 1   | 0             | A      |
| Req 2   | 1             | B      |
| Req 3   | 2             | C      |
| Req 4   | (3 % 3 = 0)   | A      |

Simple circular rotation.

<br>

**Round-Robin Algorithm kaha best hai**:

Jab aapke saare backend servers ki configuration (RAM, CPU, Storage) bilkul identical (ek jaisi) ho tab ye algorithm sahi hoti hai.

<br>

**Problem kaha aati hai**:

Problem tab hoti hai jab servers unequal hon matlab kisi server ki configuration high aur kisi ki low.

Example:
- Server A ‚Üí Powerful (16 CPU cores).
- Server B ‚Üí Weak (2 CPU cores).

To is case mein round robin algorithm Server B (Weak Server) pe fir bhi traffic ko bhejta jayega jisse Server B overload ho sakta hai aur down ho jayega.

Result:
- Server A: Underutilized.
- Server B: Overload.

<br>
<br>

### Weighted Round Robin

Weighted Round-Robin algorithm Round-Robin algorithm ka updated version hai ya smart version hai.

Weighted Round Robin (WRR) ko samajhne ke liye pehle ek simple sawal:
- Agar saare servers equal capacity ke nahi hain, to kya unko equal traffic dena logical hai?

Bilkul nahi.

Isi problem ko solve karta hai Weighted Round Robin.

Weighted Round Robin algorithm mein servers ko unki configuration ke hisab se ek weight matlab ek number assign kar dete hain, fir jitna jyada server ka weight hoga us server pe utna jyada traffic bheja jata hai.

Har server ko weight (priority / capacity value) assign hoti hai.

Higher weight ‚áí More requests

**Example**:

Suppose load balancer ke backend mein 3 servers hain:
- Server A (8 CPU & 32 GB RAM).
- Server B (4 CPU & 16 GB RAM).
- Server C (2 CPU & 8 GB RAM).

To in servers ko inki capacity ya configuration ke hisaab se ek weight assign kar denge.

- Server A (8 CPU & 32 GB RAM) = **6**.
- Server B (4 CPU & 16 GB RAM) = **3**.
- Server C (2 CPU & 8 GB RAM) = **2**.

Execution:

- Request 1 = Server A.
- Request 2 = Server A.
- Request 3 = Server A.
- Request 4 = Server B.
- Request 5 = Server B.
- Request 6 = Server c.

Repeat

- Request 7 = Server A.
- Request 8 = Server A.

Ese hi servers request distribute hoti hain.

Notice:
- A gets 3/6 traffic = 50%.
- B gets 2/6 traffic = 33%.
- C gets 1/6 traffic = 17%.

<br>

**Practical Server Example**:

Backend pool:
- Server A ‚Üí 8 CPU cores ‚Üí Weight 4.
- Server B ‚Üí 4 CPU cores ‚Üí Weight 2.
- Server C ‚Üí 2 CPU cores ‚Üí Weight 1.

Total weight = 7

Traffic pattern per 7 requests:
- A, A, A, A, B, B, C

<br>

**Weighted Round-Robin Algorithm Kaha Best Hai**:

Jab aapke cluster mein purane aur naye servers mix hon. Naye servers ko zyada weight de kar aap unhe zyada kaam de sakte hain.


<br>
<br>

### IP Hash Algorithm
